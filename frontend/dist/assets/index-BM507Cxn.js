var ae=Object.defineProperty;var re=(a,s,t)=>s in a?ae(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var A=(a,s,t)=>re(a,typeof s!="symbol"?s+"":s,t);import{r as j,b as ie,a as E}from"./vendor-CBH9K-97.js";import{u as _,a as oe,B as le,R as ce,b as M,N as de}from"./router-C_rsQ0Gi.js";import{c as me,a as q}from"./utils-Uut0ANsR.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var Q={exports:{}},$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue=j,he=Symbol.for("react.element"),fe=Symbol.for("react.fragment"),xe=Object.prototype.hasOwnProperty,ge=ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pe={key:!0,ref:!0,__self:!0,__source:!0};function X(a,s,t){var i,n={},r=null,l=null;t!==void 0&&(r=""+t),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(l=s.ref);for(i in s)xe.call(s,i)&&!pe.hasOwnProperty(i)&&(n[i]=s[i]);if(a&&a.defaultProps)for(i in s=a.defaultProps,s)n[i]===void 0&&(n[i]=s[i]);return{$$typeof:he,type:a,key:r,ref:l,props:n,_owner:ge.current}}$.Fragment=fe;$.jsx=X;$.jsxs=X;Q.exports=$;var e=Q.exports,B={},H=ie;B.createRoot=H.createRoot,B.hydrateRoot=H.hydrateRoot;const be="modulepreload",ke=function(a){return"/"+a},G={},ve=function(s,t,i){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(t.map(f=>{if(f=ke(f),f in G)return;G[f]=!0;const h=f.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":be,h||(x.as="script"),x.crossOrigin="",x.href=f,o&&x.setAttribute("nonce",o),document.head.appendChild(x),h)return new Promise((v,g)=>{x.addEventListener("load",v),x.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${f}`)))})}))}function r(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&r(o.reason);return s().catch(r)})},ye={};function je(a,s){let t;try{t=a()}catch{return}return{getItem:n=>{var r;const l=f=>f===null?null:JSON.parse(f,void 0),o=(r=t.getItem(n))!=null?r:null;return o instanceof Promise?o.then(l):l(o)},setItem:(n,r)=>t.setItem(n,JSON.stringify(r,void 0)),removeItem:n=>t.removeItem(n)}}const I=a=>s=>{try{const t=a(s);return t instanceof Promise?t:{then(i){return I(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return I(i)(t)}}}},we=(a,s)=>(t,i,n)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,p)=>({...p,...m}),...s},l=!1;const o=new Set,f=new Set;let h;try{h=r.getStorage()}catch{}if(!h)return a((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...m)},i,n);const y=I(r.serialize),x=()=>{const m=r.partialize({...i()});let p;const u=y({state:m,version:r.version}).then(k=>h.setItem(r.name,k)).catch(k=>{p=k});if(p)throw p;return u},v=n.setState;n.setState=(m,p)=>{v(m,p),x()};const g=a((...m)=>{t(...m),x()},i,n);let d;const c=()=>{var m;if(!h)return;l=!1,o.forEach(u=>u(i()));const p=((m=r.onRehydrateStorage)==null?void 0:m.call(r,i()))||void 0;return I(h.getItem.bind(h))(r.name).then(u=>{if(u)return r.deserialize(u)}).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==r.version){if(r.migrate)return r.migrate(u.state,u.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return u.state}).then(u=>{var k;return d=r.merge(u,(k=i())!=null?k:g),t(d,!0),x()}).then(()=>{p==null||p(d,void 0),l=!0,f.forEach(u=>u(d))}).catch(u=>{p==null||p(void 0,u)})};return n.persist={setOptions:m=>{r={...r,...m},m.getStorage&&(h=m.getStorage())},clearStorage:()=>{h==null||h.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>c(),hasHydrated:()=>l,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(f.add(m),()=>{f.delete(m)})},c(),d||g},Ne=(a,s)=>(t,i,n)=>{let r={storage:je(()=>localStorage),partialize:c=>c,version:0,merge:(c,m)=>({...m,...c}),...s},l=!1;const o=new Set,f=new Set;let h=r.storage;if(!h)return a((...c)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...c)},i,n);const y=()=>{const c=r.partialize({...i()});return h.setItem(r.name,{state:c,version:r.version})},x=n.setState;n.setState=(c,m)=>{x(c,m),y()};const v=a((...c)=>{t(...c),y()},i,n);n.getInitialState=()=>v;let g;const d=()=>{var c,m;if(!h)return;l=!1,o.forEach(u=>{var k;return u((k=i())!=null?k:v)});const p=((m=r.onRehydrateStorage)==null?void 0:m.call(r,(c=i())!=null?c:v))||void 0;return I(h.getItem.bind(h))(r.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==r.version){if(r.migrate)return[!0,r.migrate(u.state,u.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var k;const[w,b]=u;if(g=r.merge(b,(k=i())!=null?k:v),t(g,!0),w)return y()}).then(()=>{p==null||p(g,void 0),g=i(),l=!0,f.forEach(u=>u(g))}).catch(u=>{p==null||p(void 0,u)})};return n.persist={setOptions:c=>{r={...r,...c},c.storage&&(h=c.storage)},clearStorage:()=>{h==null||h.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>d(),hasHydrated:()=>l,onHydrate:c=>(o.add(c),()=>{o.delete(c)}),onFinishHydration:c=>(f.add(c),()=>{f.delete(c)})},r.skipHydration||d(),g||v},Se=(a,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((ye?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),we(a,s)):Ne(a,s),Te=Se,Me=()=>"device_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36),C=me()(Te(a=>({deviceId:"",isOnline:navigator.onLine,lastSyncAt:null,tasks:[],selectedTaskIds:[],timer:{taskId:null,sessionId:null,startTime:null,endTime:null,isRunning:!1,isPaused:!1,estimatedMinutes:0},setDeviceId:s=>a({deviceId:s}),setOnline:s=>a({isOnline:s}),setLastSync:s=>a({lastSyncAt:s}),addTasks:s=>a(t=>{const i=s.map(n=>({...n,id:"task_"+Math.random().toString(36).substr(2,9),created_at:new Date().toISOString(),status:n.status||"open"}));return{tasks:[...t.tasks,...i]}}),updateTask:(s,t)=>a(i=>({tasks:i.tasks.map(n=>n.id===s?{...n,...t,updated_at:new Date().toISOString()}:n)})),deleteTask:s=>a(t=>({tasks:t.tasks.filter(i=>i.id!==s),selectedTaskIds:t.selectedTaskIds.filter(i=>i!==s)})),toggleTaskSelection:s=>a(t=>({selectedTaskIds:t.selectedTaskIds.includes(s)?t.selectedTaskIds.filter(n=>n!==s):[...t.selectedTaskIds,s]})),clearSelection:()=>a({selectedTaskIds:[]}),setTasks:s=>a({tasks:s}),startTimer:(s,t,i)=>{const n=Date.now(),r=n+t*60*1e3;a({timer:{taskId:s,sessionId:i||null,startTime:n,endTime:r,isRunning:!0,isPaused:!1,estimatedMinutes:t}})},pauseTimer:()=>a(s=>{if(!s.timer.isRunning||!s.timer.startTime)return s;const i=Date.now()-s.timer.startTime,n=s.timer.estimatedMinutes*60*1e3-i;return{timer:{...s.timer,isRunning:!1,isPaused:!0,estimatedMinutes:Math.max(0,Math.ceil(n/(60*1e3)))}}}),resumeTimer:()=>a(s=>{if(!s.timer.isPaused)return s;const t=Date.now(),i=t+s.timer.estimatedMinutes*60*1e3;return{timer:{...s.timer,startTime:t,endTime:i,isRunning:!0,isPaused:!1}}}),resetTimer:()=>a(s=>({timer:{...s.timer,startTime:null,endTime:null,isRunning:!1,isPaused:!1}})),completeTimer:s=>a(t=>t.timer.taskId?{tasks:t.tasks.map(n=>n.id===t.timer.taskId?{...n,status:s?"done":"abandoned",updated_at:new Date().toISOString()}:n),timer:{taskId:null,sessionId:null,startTime:null,endTime:null,isRunning:!1,isPaused:!1,estimatedMinutes:0}}:{timer:{taskId:null,sessionId:null,startTime:null,endTime:null,isRunning:!1,isPaused:!1,estimatedMinutes:0}})}),{name:"routine-roulette-storage",partialize:a=>({deviceId:a.deviceId,tasks:a.tasks,selectedTaskIds:a.selectedTaskIds,lastSyncAt:a.lastSyncAt}),onRehydrateStorage:()=>a=>{a&&!a.deviceId&&a.setDeviceId(Me()),a&&a.setOnline(navigator.onLine)}}));typeof window<"u"&&(window.addEventListener("online",()=>{C.getState().setOnline(!0)}),window.addEventListener("offline",()=>{C.getState().setOnline(!1)}));function Ee(a){const s=a.split(`
`).map(n=>n.trim()).filter(n=>n.length>0),t=[];for(const n of s){if(n.length<3)continue;const r=n.replace(/^[-*•\d+\.\)\]\}\s]+/,"").replace(/^\s*[-]\s*/,"").trim();if(!r||r.length<3)continue;let l=10,o="medium";const f=r.toLowerCase(),h=["read","review","check","browse","look","watch","listen","scan","skim","observe","monitor","track","update","edit","organize","sort","file","archive","backup","sync"],y=["create","build","write","design","implement","develop","code","program","exercise","workout","run","gym","meeting","present","pitch","negotiate","debate","brainstorm","innovate","solve","fix","troubleshoot","research","analyze","study","learn","practice"];h.some(x=>f.includes(x))?o="low":y.some(x=>f.includes(x))&&(o="high"),(f.includes("quick")||f.includes("brief"))&&(o=o==="high"?"medium":"low"),(f.includes("deep")||f.includes("thorough"))&&(o=o==="low"?"medium":"high"),t.push({title:r,est_minutes:l,energy:o})}const i={actionable:t.length>0&&t.every(n=>n.title.length>5&&!n.title.toLowerCase().includes("maybe")&&!n.title.toLowerCase().includes("consider")&&!n.title.toLowerCase().includes("think about")),size_ok:t.length>0&&t.length<=10,safe:t.every(n=>{const r=n.title.toLowerCase();return!["delete","remove","destroy","kill","harm","break"].some(o=>r.includes(o))})};return{tasks:t,quality:i}}function Ce({progress:a,className:s=""}){return e.jsx("div",{className:`w-full bg-outline-variant rounded-full h-2 ${s}`,children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${Math.min(100,Math.max(0,a))}%`}})})}function Y({icon:a,title:s,description:t,action:i}){return e.jsxs("div",{className:"text-center py-xl",children:[e.jsx("div",{className:"text-6xl mb-lg opacity-50",children:a}),e.jsx("h3",{className:"text-xl font-semibold mb-sm text-on-surface-variant",children:s}),e.jsx("p",{className:"text-on-surface-variant mb-lg max-w-sm mx-auto",children:t}),i&&e.jsx("button",{onClick:i.onClick,className:"btn btn-primary",children:i.label})]})}function K({size:a="md",className:s=""}){const t={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return e.jsx("div",{className:`animate-spin rounded-full border-2 border-outline border-t-primary ${t[a]} ${s}`})}function V({isOpen:a,onConfirm:s,onCancel:t}){return a?e.jsx("div",{className:"cute-modal-overlay",onClick:t,children:e.jsxs("div",{className:"cute-modal",onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"cute-modal-cat",children:"😿"}),e.jsx("div",{className:"cute-modal-content",children:e.jsxs("p",{className:"cute-modal-text",children:["The knitting cat will be sad.",e.jsx("br",{}),e.jsx("strong",{children:"ARE YOU SURE YOU WANT TO ABANDON?"})]})}),e.jsxs("div",{className:"cute-modal-actions",children:[e.jsx("button",{onClick:t,className:"cute-btn cute-btn-keep",children:"Keep Going! 🧶"}),e.jsx("button",{onClick:s,className:"cute-btn cute-btn-abandon",children:"Yes, Abandon 😔"})]})]})}):null}function z({mood:a,size:s="md",className:t=""}){const i={sm:"w-16 h-16",md:"w-20 h-20",lg:"w-28 h-28"},n={happy:"animate-bounce",focused:"animate-pulse",dancing:"animate-bounce",frustrated:""};return e.jsx("img",{src:"/brain-mascot.svg",alt:"Brain mascot",className:`${i[s]} ${n[a]} ${t} object-contain`,style:{filter:"drop-shadow(0 2px 8px rgba(0,0,0,0.1))"}})}function Z({message:a,showMessage:s=!0,...t}){const n=a||{happy:"Let's go! 🎉",focused:"Focus time! 💪",dancing:"You're on fire! 🔥",frustrated:"We got this! 💙"}[t.mood];return e.jsxs("div",{className:"flex flex-col items-center gap-md",children:[e.jsx(z,{...t}),s&&e.jsx("div",{className:"bg-surface-variant rounded-lg px-md py-sm max-w-xs text-center",children:e.jsx("p",{className:"text-sm text-on-surface-variant",children:n})})]})}function ee(){const[a,s]=E.useState("happy"),t=E.useCallback(l=>{s(l)},[]),i=E.useCallback(()=>{s("dancing"),setTimeout(()=>s("happy"),3e3)},[]),n=E.useCallback(()=>{s("focused")},[]),r=E.useCallback(()=>{s("frustrated"),setTimeout(()=>s("happy"),2e3)},[]);return{mood:a,updateMood:t,celebrateMood:i,focusMood:n,frustratedMood:r}}function Re(){const a=_(),{tasks:s,addTasks:t,setTasks:i,deleteTask:n}=C(),[r,l]=j.useState(""),[o,f]=j.useState(!1),h=async()=>{if(r.trim()){f(!0);try{await new Promise(c=>setTimeout(c,500));const d=Ee(r);d.tasks.length>0&&(t(d.tasks.map(c=>({...c,status:"open"}))),l(""))}catch(d){console.error("Error normalizing tasks:",d)}finally{f(!1)}}},y=async()=>{if(r.trim()){const d=await x();d.length>0&&l(c=>c?`${c}
${d.join(`
`)}`:d.join(`
`))}else{const d=await x();d.length>0&&l(d.join(`
`))}},x=async()=>{try{const{openaiService:d}=await ve(async()=>{const{openaiService:k}=await import("./openaiService-CCI7gc7I.js");return{openaiService:k}},[]),c=s.filter(k=>k.status==="done").map(k=>k.title),m=new Date().getHours(),p=m<12?"morning":m<17?"afternoon":"evening";return await d.generateTaskSuggestions({completedTasks:c,timeOfDay:p})}catch(d){return console.error("Failed to generate suggestions:",d),["Take a 10 minute walk","Drink a glass of water","Do 5 minutes of stretching","Check and respond to important emails"]}},v=()=>{if(g.length===0)return;const d=g[Math.floor(Math.random()*g.length)];a("/timer",{state:{task:d}})},g=s.filter(d=>d.status==="open").filter((d,c,m)=>m.findIndex(p=>p.title===d.title)===c);return e.jsxs("div",{className:"container py-lg",children:[e.jsxs("div",{className:"text-center mb-xl",children:[e.jsx(z,{mood:"happy",size:"lg",className:"mb-md"}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 bg-clip-text text-transparent",children:"✨ You started - that's the hardest part. ✨"})]}),e.jsxs("div",{className:"card mb-xl",children:[e.jsx("div",{className:"text-center py-lg",children:e.jsx("h2",{className:"text-2xl font-bold",children:"SPIN & SMASH YOUR TODOs"})}),e.jsx("textarea",{value:r,onChange:d=>l(d.target.value),placeholder:`Check emails
Water plants
Review a project
Take a walk`,className:"input textarea mb-md",rows:6,disabled:o}),e.jsxs("div",{className:"flex gap-lg justify-center mt-2xl max-w-2xl mx-auto",children:[e.jsx("button",{onClick:h,disabled:!r.trim()||o,className:"btn btn-primary h-12 flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(K,{size:"sm"}),"Processing..."]}):"Add Tasks"}),e.jsx("button",{onClick:y,disabled:o,className:"btn btn-secondary h-12 flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(K,{size:"sm"}),"Generating..."]}):"🤖 Get Smart Suggestions"})]})]}),g.length>0?e.jsx("div",{className:"card mb-xl",children:e.jsxs("div",{className:"text-center py-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-lg",children:"📋 Your Tasks"}),e.jsx("div",{className:"max-w-2xl mx-auto space-y-sm",children:g.map((d,c)=>{const m=d.energy==="low"?"🟢":d.energy==="medium"?"🟡":"🔴",p=d.est_minutes<60?`${d.est_minutes}m`:`${Math.floor(d.est_minutes/60)}h ${d.est_minutes%60}m`;return e.jsxs("div",{className:"flex items-center justify-between p-md bg-white border border-gray-200 rounded-lg hover:shadow-sm group transition-all cursor-pointer",onClick:()=>a("/timer",{state:{task:d}}),children:[e.jsxs("div",{className:"flex items-center gap-md flex-1",children:[e.jsxs("span",{className:"text-sm font-mono text-gray-400 w-8",children:["#",c+1]}),e.jsx("span",{className:"font-medium text-gray-800 flex-1",children:d.title}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:p}),e.jsx("span",{className:"text-lg",children:m})]}),e.jsx("button",{onClick:u=>{u.stopPropagation(),n(d.id)},className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all ml-sm",title:"Delete task",children:"✕"})]},d.id)})}),e.jsx("div",{"aria-hidden":!0,role:"presentation",style:{height:40}}),e.jsxs("div",{className:"flex justify-center gap-sm mt-[40px] mb-[24px] max-w-sm mx-auto",children:[e.jsx("button",{onClick:()=>{i([])},className:"btn btn-sm text-red-600 border border-red-300 hover:bg-red-50 px-md py-sm rounded-lg flex-1",children:"🗑️ Clear All"}),e.jsx("button",{onClick:v,className:"btn btn-sm bg-purple-600 hover:bg-purple-700 text-white px-md py-sm rounded-lg flex-1",children:"🎡 Spin Tasks"})]}),e.jsx("div",{"aria-hidden":!0,role:"presentation",style:{height:20}}),e.jsxs("p",{className:"text-sm text-on-surface-variant",children:[g.length," task",g.length!==1?"s":""," ready to spin!"]})]})}):e.jsx(Y,{icon:"📝",title:"No tasks yet",description:"Add tasks above to get started!"})]})}function Ae({tasks:a,onTaskSelected:s,isSpinning:t=!1}){const[i,n]=j.useState(0),[r,l]=j.useState(!1),o=j.useRef(null),f=()=>{if(r||a.length===0)return;l(!0);const x=5+Math.random()*5,v=Math.random()*360,g=i+x*360+v;n(g),setTimeout(()=>{const d=(360-g%360)%360,c=360/a.length,m=Math.floor(d/c),p=a[m]||a[0];l(!1),s(p)},3e3)};if(a.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64 bg-surface-variant rounded-lg",children:e.jsx("p",{className:"text-on-surface-variant",children:"No tasks to spin!"})});const h=["#8B5CF6","#EC4899","#06B6D4","#10B981","#F59E0B","#EF4444","#8B5A2B","#6B7280","#7C3AED","#DB2777"],y=360/a.length;return e.jsxs("div",{className:"flex flex-col items-center gap-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2 z-10",children:e.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-b-8 border-l-transparent border-r-transparent border-b-primary"})}),e.jsx("div",{ref:o,className:`w-64 h-64 rounded-full border-4 border-outline relative overflow-hidden ${r?"animate-spin-custom":""}`,style:{transform:`rotate(${i}deg)`,transition:r?"transform 3s cubic-bezier(0.25, 0.46, 0.45, 0.94)":"none"},children:a.map((x,v)=>{const g=v*y,d=(v+1)*y,c=(g+d)/2,m=50+45*Math.cos((g-90)*Math.PI/180),p=50+45*Math.sin((g-90)*Math.PI/180),u=50+45*Math.cos((d-90)*Math.PI/180),k=50+45*Math.sin((d-90)*Math.PI/180),w=y>180?1:0,b=["M 50 50",`L ${m} ${p}`,`A 45 45 0 ${w} 1 ${u} ${k}`,"Z"].join(" "),L=30,P=50+L*Math.cos((c-90)*Math.PI/180),S=50+L*Math.sin((c-90)*Math.PI/180);return e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("path",{d:b,fill:h[v%h.length],stroke:"#fff",strokeWidth:"0.5"}),e.jsx("text",{x:P,y:S,textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontSize:"3",fontWeight:"600",transform:`rotate(${c}, ${P}, ${S})`,children:x.title.length>15?x.title.substring(0,12)+"...":x.title})]},x.id)})})]}),e.jsx("button",{onClick:f,disabled:r||t,className:`btn btn-lg btn-primary ${r||t?"opacity-50 cursor-not-allowed":""}`,children:r||t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Spinning..."]}):e.jsx(e.Fragment,{children:"🎡 Spin the Wheel!"})}),e.jsxs("p",{className:"text-sm text-on-surface-variant",children:[a.length," task",a.length!==1?"s":""]})]})}function Ie({task:a,onAccept:s,onSpin:t}){const[i,n]=j.useState(a.est_minutes),r=()=>{s()};return e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-4xl mb-md",children:"🎯"}),e.jsx("h3",{className:"text-xl font-semibold mb-sm",children:"Your task is..."}),e.jsx("div",{className:"card bg-primary text-on-primary mb-lg",children:e.jsx("h4",{className:"text-lg font-semibold",children:a.title})}),e.jsxs("div",{className:"mb-lg",children:[e.jsx("p",{className:"text-sm text-on-surface-variant mb-md",children:"⏰ Adjust your timer:"}),e.jsxs("div",{className:"flex items-center justify-center gap-md mb-md",children:[e.jsx("button",{onClick:()=>n(Math.max(1,i-5)),className:"btn btn-outline btn-sm",children:"-5m"}),e.jsx("button",{onClick:()=>n(Math.max(1,i-1)),className:"btn btn-outline btn-sm",children:"-1m"}),e.jsx("div",{className:"px-lg py-sm bg-surface-variant rounded-lg",children:e.jsxs("span",{className:"text-2xl font-bold",children:[i,"m"]})}),e.jsx("button",{onClick:()=>n(i+1),className:"btn btn-outline btn-sm",children:"+1m"}),e.jsx("button",{onClick:()=>n(i+5),className:"btn btn-outline btn-sm",children:"+5m"})]})]}),e.jsxs("div",{className:"flex gap-md justify-center",children:[e.jsx("button",{onClick:t,className:"btn btn-outline",children:"🎡 Spin Again"}),e.jsxs("button",{onClick:r,className:"btn btn-primary",children:["▶️ Start Timer (",i,"m)"]})]})]})}function _e(){const a=_(),{tasks:s,selectedTaskIds:t,startTimer:i}=C(),[n,r]=j.useState(null),[l]=j.useState(!1),{mood:o,updateMood:f,celebrateMood:h,focusMood:y}=ee(),x=s.filter(c=>t.includes(c.id)&&c.status==="open");j.useEffect(()=>{x.length===0&&a("/add-tasks")},[x.length,a]);const v=c=>{r(c),h(),q({particleCount:100,spread:70,origin:{y:.6}})},g=async()=>{n&&(y(),i(n.id,n.est_minutes),a("/timer"))},d=()=>{r(null),f("happy")};return x.length===0?e.jsx("div",{className:"container py-lg",children:e.jsx(Y,{icon:"🎡",title:"No tasks selected",description:"Select tasks to spin!",action:{label:"Add Tasks",onClick:()=>a("/add-tasks")}})}):e.jsxs("div",{className:"container py-lg",children:[e.jsx("div",{className:"text-center mb-xl",children:e.jsx(Z,{mood:o,size:"lg",message:n?"Ready to start? 🎯":"Spin time! 🎲"})}),e.jsx("button",{onClick:()=>a("/add-tasks"),className:"btn btn-ghost mb-lg",children:"← Back to Tasks"}),n?e.jsx(Ie,{task:n,onAccept:g,onSpin:d}):e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{tasks:x,onTaskSelected:v,isSpinning:l}),e.jsx("div",{className:"mt-xl",children:e.jsx("p",{className:"text-lg text-on-surface-variant mb-lg",children:"🎲 Spin the wheel to choose your next task!"})})]})]})}const Le=j.memo(({width:a=600,height:s=420,speed:t=1,theme:i="warm",paused:n=!1})=>{const r={"--speed":String(t),"--paused":n?"paused":"running"};return e.jsxs("div",{className:`kc-root kc-theme-${i}`,style:r,children:[e.jsx("style",{children:`
          .kc-root { position: relative; }
          .kc-root svg { display: block; max-width: 100%; height: auto; }

          /* ================= Colors (themes) ================= */
          .kc-theme-warm { 
            --bg:#1a1a2e; --stone:#4a4a5a; --mortar:#353545; --wood:#8b6f47;
            --flame1:#ff9a56; --flame2:#ff6b35; --flame3:#ffcc70;
            --fur:#f4a261; --fur-dark:#e76f51; --nose:#8b4513; --eye:#2a1810;
            --sweater:#2a9d8f; --yarn:#e9c46a; --thread:#f4a261;
            --rug:#264653; --chair:#2a9d8f; --shadow:#0008; --stroke:#0003;
          }
          .kc-theme-cool {
            --bg:#1f2430; --stone:#3a4456; --mortar:#2a3141; --wood:#4c6171;
            --flame1:#ffc27a; --flame2:#ff8a5b; --flame3:#ffe08a;
            --fur:#b8d0ff; --fur-dark:#9ab6eb; --nose:#6c7a8a; --eye:#0f1621;
            --sweater:#7dcfff; --yarn:#7ee787; --thread:#3a8f4e;
            --rug:#5b7c99; --chair:#587a92; --shadow:#0008; --stroke:#0004;
          }
          .kc-theme-mono {
            --bg:#262626; --stone:#3a3a3a; --mortar:#2b2b2b; --wood:#4a4a4a;
            --flame1:#ffee99; --flame2:#ffcc66; --flame3:#fff3b2;
            --fur:#c9c9c9; --fur-dark:#adadad; --nose:#7a7a7a; --eye:#111111;
            --sweater:#9e9e9e; --yarn:#bdbdbd; --thread:#888888;
            --rug:#7a7a7a; --chair:#6e6e6e; --shadow:#0008; --stroke:#0004;
          }

          /* ================= Animations ================= */
          .kc-root * { vector-effect: non-scaling-stroke; }
          .kc-anim { animation-play-state: var(--paused); }
          .kc-pivot { transform-box: fill-box; transform-origin: center; }

          @keyframes kc-fire {
            0%,100% { transform: translateY(0) scale(1) rotate(-2deg); opacity: .9; }
            25% { transform: translateY(-4px) scale(1.08) rotate(1deg); opacity: 1; }
            50% { transform: translateY(-2px) scale(1.05) rotate(-1deg); opacity: .95; }
            75% { transform: translateY(-3px) scale(1.06) rotate(2deg); opacity: 1; }
          }
          @keyframes kc-blink {
            0%, 90%, 100% { transform: scaleY(1); }
            92%, 94% { transform: scaleY(0.1); }
            96%, 98% { transform: scaleY(0.05); }
          }
          @keyframes kc-purr {
            0%,100% { transform: scale(1); }
            50% { transform: scale(1.02); }
          }
          @keyframes kc-tail {
            0%,100% { transform: rotate(8deg); }
            25% { transform: rotate(-4deg); }
            50% { transform: rotate(6deg); }
            75% { transform: rotate(-2deg); }
          }
          @keyframes kc-knit-left {
            0%,100% { transform: rotate(-12deg) translateY(0); }
            25% { transform: rotate(8deg) translateY(-1px); }
            50% { transform: rotate(-6deg) translateY(1px); }
            75% { transform: rotate(10deg) translateY(-0.5px); }
          }
          @keyframes kc-knit-right {
            0%,100% { transform: rotate(12deg) translateY(0); }
            25% { transform: rotate(-8deg) translateY(-1px); }
            50% { transform: rotate(6deg) translateY(1px); }
            75% { transform: rotate(-10deg) translateY(-0.5px); }
          }
          @keyframes kc-thread {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -80; }
          }
          @keyframes kc-bob {
            0%,100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-3px) rotate(1deg); }
            50% { transform: translateY(-1px) rotate(-1deg); }
            75% { transform: translateY(-2px) rotate(0.5deg); }
          }

          .kc-fire { animation: kc-fire calc(0.8s / var(--speed)) ease-in-out infinite; }
          .kc-eye { animation: kc-blink calc(4.5s / var(--speed)) ease-in-out infinite; transform-origin: center; }
          .kc-chest { animation: kc-purr calc(3s / var(--speed)) ease-in-out infinite; }
          .kc-tail { animation: kc-tail calc(2.8s / var(--speed)) ease-in-out infinite; }
          .kc-needle-left { animation: kc-knit-left calc(0.9s / var(--speed)) ease-in-out infinite; }
          .kc-needle-right { animation: kc-knit-right calc(0.9s / var(--speed)) ease-in-out infinite; }
          .kc-thread { stroke-dasharray: 8 6; animation: kc-thread calc(1s / var(--speed)) linear infinite; }
          .kc-bob { animation: kc-bob calc(2.2s / var(--speed)) ease-in-out infinite; }
        `}),e.jsxs("svg",{viewBox:"0 0 600 420",width:a,height:s,role:"img","aria-label":"A cozy cat knitting a sweater near a fireplace",children:[e.jsx("rect",{x:"0",y:"0",width:"600",height:"420",fill:"var(--bg)"}),e.jsx("ellipse",{cx:"300",cy:"384",rx:"220",ry:"26",fill:"var(--rug)",opacity:".45"}),e.jsxs("g",{transform:"translate(40,110)",children:[e.jsx("rect",{x:"0",y:"0",width:"160",height:"170",rx:"6",fill:"var(--stone)"}),Array.from({length:7}).map((l,o)=>e.jsx("line",{x1:8,x2:152,y1:10+o*24,y2:10+o*24,stroke:"var(--mortar)",strokeWidth:2},"mrow"+o)),Array.from({length:5}).map((l,o)=>e.jsx("line",{y1:8,y2:162,x1:16+o*28,x2:16+o*28,stroke:"var(--mortar)",strokeWidth:2},"mcol"+o)),e.jsx("rect",{x:"24",y:"56",width:"112",height:"92",rx:"6",fill:"#111"}),e.jsxs("g",{transform:"translate(80,110)",children:[e.jsx("path",{className:"kc-anim kc-fire kc-pivot",d:"M0 0c18-20 24-44 0-58 -24 14 -18 38 0 58z",fill:"var(--flame2)",opacity:".9"}),e.jsx("path",{className:"kc-anim kc-fire kc-pivot",d:"M0 0c14-16 20-34 0-46 -20 12 -14 30 0 46z",fill:"var(--flame1)"}),e.jsx("path",{className:"kc-anim kc-fire kc-pivot",d:"M0 0c10-12 14-26 0-34 -14 8 -10 22 0 34z",fill:"var(--flame3)"})]}),e.jsx("rect",{x:"34",y:"128",width:"92",height:"8",rx:"4",fill:"var(--wood)"}),e.jsx("rect",{x:"40",y:"120",width:"92",height:"8",rx:"4",fill:"var(--wood)",transform:"rotate(4 86 124)"})]}),e.jsxs("g",{transform:"translate(380,150)",children:[e.jsx("rect",{x:"0",y:"24",width:"160",height:"120",rx:"12",fill:"var(--chair)"}),e.jsx("rect",{x:"16",y:"0",width:"128",height:"40",rx:"10",fill:"var(--chair)"})]}),e.jsx("g",{transform:"translate(240,350)",children:e.jsx("path",{className:"kc-thread kc-anim",d:"M0 0 C 40 -10, 90 -32, 130 -22",stroke:"var(--thread)",strokeWidth:"3",fill:"none"})}),e.jsxs("g",{transform:"translate(224,346)",className:"kc-bob kc-anim",children:[e.jsx("circle",{r:"16",fill:"var(--yarn)",stroke:"var(--stroke)"}),e.jsx("path",{d:"M-10,-4 a12,12 0 0 1 20,0",stroke:"#0003",fill:"none"}),e.jsx("path",{d:"M-12,2 a12,12 0 0 0 24,0",stroke:"#0003",fill:"none"})]}),e.jsxs("g",{transform:"translate(300,240)",children:[e.jsx("g",{transform:"translate(120,80)",className:"kc-tail kc-anim kc-pivot",children:e.jsx("path",{d:"M0 0 c 30 10, 40 30, 10 44 c -26 12 -44 -6 -40 -20 c 4 -16 18 -18 30 -24",fill:"var(--fur)",stroke:"var(--stroke)"})}),e.jsxs("g",{className:"kc-chest kc-anim kc-pivot",children:[e.jsx("ellipse",{cx:"0",cy:"60",rx:"90",ry:"70",fill:"var(--sweater)",stroke:"var(--stroke)"}),Array.from({length:15}).map((l,o)=>e.jsx("line",{x1:-75+o*10,y1:108,x2:-70+o*10,y2:20,stroke:"#0002"},o)),e.jsx("ellipse",{cx:"-50",cy:"40",rx:"28",ry:"22",fill:"var(--sweater)",stroke:"var(--stroke)"}),e.jsx("ellipse",{cx:"50",cy:"40",rx:"28",ry:"22",fill:"var(--sweater)",stroke:"var(--stroke)"})]}),e.jsxs("g",{transform:"translate(0,-10)",children:[e.jsx("circle",{cx:"0",cy:"0",r:"48",fill:"var(--fur)",stroke:"var(--stroke)"}),e.jsx("ellipse",{cx:"0",cy:"6",rx:"38",ry:"32",fill:"var(--fur-dark)",opacity:".25"}),e.jsx("ellipse",{cx:"0",cy:"18",rx:"32",ry:"20",fill:"#fff",opacity:".15"}),e.jsx("path",{d:"M-38,-12 l-22,-20 l8,28 z",fill:"var(--fur)",stroke:"var(--stroke)"}),e.jsx("path",{d:"M38,-12 l22,-20 l-8,28 z",fill:"var(--fur)",stroke:"var(--stroke)"}),e.jsx("path",{d:"M-42,-18 l-12,-8 l4,16 z",fill:"#ffb3ba",opacity:".6"}),e.jsx("path",{d:"M42,-18 l12,-8 l-4,16 z",fill:"#ffb3ba",opacity:".6"}),e.jsxs("g",{transform:"translate(-16,-2)",children:[e.jsx("ellipse",{cx:"0",cy:"0",rx:"8",ry:"6",fill:"#fff",opacity:".3"}),e.jsx("ellipse",{cx:"0",cy:"2",rx:"6",ry:"4",fill:"var(--eye)",className:"kc-eye kc-anim"}),e.jsx("ellipse",{cx:"-2",cy:"0",rx:"2",ry:"2",fill:"#fff",opacity:".8"})]}),e.jsxs("g",{transform:"translate(16,-2)",children:[e.jsx("ellipse",{cx:"0",cy:"0",rx:"8",ry:"6",fill:"#fff",opacity:".3"}),e.jsx("ellipse",{cx:"0",cy:"2",rx:"6",ry:"4",fill:"var(--eye)",className:"kc-eye kc-anim"}),e.jsx("ellipse",{cx:"-2",cy:"0",rx:"2",ry:"2",fill:"#fff",opacity:".8"})]}),e.jsx("path",{d:"M-4,10 Q0,8 4,10 Q2,14 0,15 Q-2,14 -4,10 z",fill:"var(--nose)",stroke:"#0002"}),e.jsx("ellipse",{cx:"0",cy:"11",rx:"2",ry:"1",fill:"#fff",opacity:".4"}),e.jsx("path",{d:"M0,16 Q-8,20 -16,18",stroke:"#0004",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M0,16 Q8,20 16,18",stroke:"#0004",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M0,16 Q0,22 0,24",stroke:"#0004",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M-12,8 h-24",stroke:"#0004",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M-10,14 h-26",stroke:"#0004",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M-8,20 h-22",stroke:"#0004",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M12,8 h24",stroke:"#0004",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M10,14 h26",stroke:"#0004",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("path",{d:"M8,20 h22",stroke:"#0004",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("ellipse",{cx:"-28",cy:"8",rx:"6",ry:"4",fill:"#ffb3ba",opacity:".3"}),e.jsx("ellipse",{cx:"28",cy:"8",rx:"6",ry:"4",fill:"#ffb3ba",opacity:".3"})]}),e.jsxs("g",{transform:"translate(0,52)",children:[e.jsx("path",{d:"M-46,18 q46,30 92,0 v24 h-92z",fill:"var(--yarn)",opacity:".9",stroke:"var(--stroke)"}),e.jsxs("g",{transform:"translate(-30,0)",className:"kc-needle-left kc-anim kc-pivot",children:[e.jsx("rect",{x:"-60",y:"-2",width:"80",height:"4",rx:"2",fill:"#c9c9c9",stroke:"#0003"}),e.jsx("circle",{cx:"22",cy:"0",r:"3",fill:"#aaa"})]}),e.jsxs("g",{transform:"translate(30,0)",className:"kc-needle-right kc-anim kc-pivot",children:[e.jsx("rect",{x:"-20",y:"-2",width:"80",height:"4",rx:"2",fill:"#c9c9c9",stroke:"#0003"}),e.jsx("circle",{cx:"62",cy:"0",r:"3",fill:"#aaa"})]}),e.jsx("path",{d:"M46,18 C 70,28 102,18 130,-12",stroke:"var(--thread)",strokeWidth:3,fill:"none",className:"kc-thread kc-anim"})]})]})]})]})}),D={},J={Rachel:"pNInz6obpgDQGcFmaJgB",Adam:"pqHfZKP75CvOlQylNhV4",Bella:"EXAVITQu4vr4xnSDxMaL",Antoni:"ErXwobaYiN019PkySvjV",Elli:"MF3mGyEYCl7XYWbV9V6O",Josh:"TxGEqnHWrfWFTfGW9XjX",Arnold:"VR6AewLTigWG4xSOukaG",Domi:"AZnzlk1XvdvUeBnXmlld",Sam:"yoZ06aMxZJJ28mfd3POQ",Custom:"your_custom_voice_id_here"};class Pe{constructor(){A(this,"isEnabled",!1);A(this,"useElevenLabs",!1);A(this,"voiceAssignments",{taskStart:"Josh",taskComplete:"Domi",timeExpired:"Arnold",taskAbandon:"Bella"});A(this,"apiKey",null);this.isEnabled="speechSynthesis"in window,this.apiKey=(D==null?void 0:D.VITE_ELEVENLABS_API_KEY)||null,this.useElevenLabs=!!this.apiKey,!this.isEnabled&&!this.useElevenLabs&&console.warn("Neither speech synthesis nor ElevenLabs available. Voice features disabled.")}async announceTaskStart(s){if(!this.isEnabled&&!this.useElevenLabs)return;const t=`Starting task: ${s}. Good luck!`;await this.speakWithVoice(t,this.voiceAssignments.taskStart)}async announceTaskComplete(s){const t=`Great job! You completed ${s}`;await this.speakWithVoice(t,this.voiceAssignments.taskComplete)}async announceTimeExpired(){await this.speakWithVoice("Uh oh! Your timer has expired",this.voiceAssignments.timeExpired)}async announceTaskAbandon(){await this.speakWithVoice("The knitting cat is sad",this.voiceAssignments.taskAbandon)}setVoiceForAction(s,t){this.voiceAssignments[s]=t,console.log(`Voice for ${s} changed to: ${t}`)}getVoiceAssignments(){return{...this.voiceAssignments}}getCurrentVoice(){return this.voiceAssignments.taskStart}getAvailableVoices(){return Object.keys(J)}async speakWithVoice(s,t){!this.isEnabled&&!this.useElevenLabs||(this.useElevenLabs&&this.apiKey?await this.speakWithElevenLabs(s,t):this.speakWithBrowser(s))}async speakWithElevenLabs(s,t){try{const i=J[t],n=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${i}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.apiKey},body:JSON.stringify({text:s,model_id:"eleven_monolingual_v1",voice_settings:{stability:.5,similarity_boost:.5}})});if(!n.ok)throw new Error(`ElevenLabs API error: ${n.status}`);const r=await n.blob(),l=URL.createObjectURL(r),o=new Audio(l);return new Promise((f,h)=>{o.onended=()=>{URL.revokeObjectURL(l),f()},o.onerror=h,o.play().catch(h)})}catch(i){console.error("ElevenLabs speech failed, falling back to browser:",i),this.speakWithBrowser(s)}}speakWithBrowser(s){if(this.isEnabled)try{const t=new SpeechSynthesisUtterance(s);t.rate=.9,t.pitch=1,t.volume=.8,speechSynthesis.speak(t)}catch(t){console.error("Browser speech synthesis failed:",t)}}isVoiceEnabled(){return this.isEnabled||this.useElevenLabs}isUsingElevenLabs(){return this.useElevenLabs}}const W=new Pe,Oe=a=>{const s=Date.now(),t=Math.max(0,Math.floor((a-s)/1e3)),i=Math.floor(t/60),n=t%60;return{minutes:i,seconds:n,totalSeconds:t,isExpired:t<=0}},We=(a,s)=>{const t=Date.now(),i=Math.max(1,s-a),n=Math.min(i,Math.max(0,t-a));return Math.min(100,Math.max(0,n/i*100))},$e=(a,s)=>`${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;function De(){var U;const a=_(),s=oe(),{timer:t,tasks:i,pauseTimer:n,resumeTimer:r,resetTimer:l,completeTimer:o,updateTask:f,startTimer:h}=C(),[y,x]=j.useState({minutes:0,seconds:0,totalSeconds:0,isExpired:!1}),[v,g]=j.useState(!1),[d,c]=j.useState(!1),m=j.useRef(null),{updateMood:p,celebrateMood:u,focusMood:k}=ee(),w=(U=s.state)==null?void 0:U.task,b=w||i.find(N=>N.id===t.taskId);j.useEffect(()=>{if(w&&!t.isRunning&&(console.log("Auto-starting timer with task:",w.title,"for",w.est_minutes,"minutes"),h(w.id,w.est_minutes)),!b){a("/add-tasks");return}k()},[w,t.isRunning,b,a,k,h]),j.useEffect(()=>{if(!t.endTime)return;const N=()=>{const T=Oe(t.endTime);x(T),T.isExpired&&t.isRunning&&(W.announceTimeExpired(),S(!0))};N();const O=setInterval(N,1e3);return()=>clearInterval(O)},[t.isRunning,t.endTime]);const L=()=>{b&&(console.log("Manual start with task:",b.title,"for",b.est_minutes,"minutes"),h(b.id,b.est_minutes),k(),W.announceTaskStart(b.title))},P=()=>{l(),g(!1),m.current=null,p("happy")},S=N=>{o(N),N?(u(),q({particleCount:140,spread:95,origin:{y:.6}}),W.announceTaskComplete((b==null?void 0:b.title)||"your task")):p("frustrated"),setTimeout(()=>a("/add-tasks"),N?1800:800)},te=()=>{W.announceTaskAbandon(),S(!1),c(!1)},se=()=>a("/add-tasks"),F=N=>{if(!b)return;const O=N*60;if(t.isRunning&&t.endTime){const T=Math.max(0,Math.floor((t.endTime-Date.now())/1e3)),R=Math.max(60,T+O);n(),typeof r=="function"&&r.length>=1?r(R):h(b.id,Math.max(1,Math.ceil(R/60)));return}if(t.isPaused){const T=m.current??b.est_minutes*60,R=Math.max(60,T+O);m.current=R,f(b.id,{est_minutes:Math.max(1,Math.ceil(R/60))});return}f(b.id,{est_minutes:Math.max(1,b.est_minutes+N)})};if(!b)return null;const ne=t.startTime&&t.endTime?We(t.startTime,t.endTime):0;return e.jsxs("div",{className:"container py-lg",children:[e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"flex justify-center",style:{marginBottom:28},children:e.jsx(Le,{width:340,height:230,theme:"warm",speed:t.isRunning?1:.6,paused:t.isPaused})}),e.jsxs("div",{className:"text-center mb-md",children:[e.jsxs("h2",{className:"title-xl mb-xs",children:["TASK: ",b.title]}),e.jsxs("div",{className:"meta-row",children:[e.jsxs("span",{className:"pill",children:["⏱️ ",e.jsxs("strong",{children:[b.est_minutes,"m"]})]}),e.jsx("span",{className:`pill ${b.energy==="low"?"pill-low":"pill-med"}`,children:b.energy==="low"?"🟢 Low energy":"🟡 Medium energy"})]})]}),e.jsxs("div",{className:"text-center mb-md",children:[e.jsxs("div",{className:"timer-row",children:[e.jsx("button",{className:"timer-nudge",onClick:()=>F(-1),title:"-1 minute",children:"−"}),e.jsx("div",{className:"timer-digits",children:$e(y.minutes,y.seconds)}),e.jsx("button",{className:"timer-nudge",onClick:()=>F(1),title:"+1 minute",children:"+"})]}),e.jsx(Ce,{progress:ne,className:"mb-sm"}),e.jsx("div",{className:"caption",children:t.isRunning?"Remaining":t.isPaused?"Paused":"Ready"})]}),e.jsxs("div",{className:"row-2 equal mb-md",style:{gap:16},children:[!t.isRunning&&e.jsx("button",{className:"btn btn-primary btn-sm",onClick:L,children:"▶ Start"}),e.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>g(!0),children:"🔄 Reset"})]}),e.jsxs("div",{className:"row-2 equal mb-lg",style:{gap:16},children:[e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>S(!0),children:"✅ Complete"}),e.jsx("button",{className:"btn btn-danger-ghost btn-sm",onClick:()=>c(!0),children:"❌ Abandon"})]}),e.jsxs("div",{className:"row-2 justify-center",style:{gap:16,marginTop:20,marginBottom:20},children:[e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>a("/add-tasks"),children:"← Back to Tasks"}),e.jsx("button",{className:"btn btn-outline btn-sm",onClick:se,children:"Next Task →"})]})]}),e.jsx(V,{isOpen:v,onConfirm:P,onCancel:()=>g(!1)}),e.jsx(V,{isOpen:d,onConfirm:te,onCancel:()=>c(!1)})]})}function Be(){const a=_(),{tasks:s}=C(),t=s.filter(n=>n.status==="open").filter((n,r,l)=>l.findIndex(o=>o.title===n.title)===r);j.useEffect(()=>{t.length===0&&a("/add-tasks")},[t.length,a]);const i=n=>{a("/timer",{state:{task:n}})};return t.length===0?null:e.jsxs("div",{className:"container py-lg",children:[e.jsxs("div",{className:"text-center mb-xl",children:[e.jsx(z,{mood:"happy",size:"lg",className:"mb-md"}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 bg-clip-text text-transparent",children:"🎡 Task Roulette Wheel"}),e.jsx("p",{className:"text-lg text-on-surface-variant mt-md",children:"Spin the wheel and let fate choose your next task!"})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"card p-xl",children:[e.jsx("h3",{className:"text-2xl font-bold text-center mb-xl",children:"🎯 Choose Your Task"}),e.jsx("div",{className:"space-y-lg mb-xl",children:t.map(n=>{var o;const r={low:{bg:"bg-green-50",border:"border-green-300",text:"text-green-800",icon:"🌱"},medium:{bg:"bg-orange-50",border:"border-orange-300",text:"text-orange-800",icon:"⚡"},high:{bg:"bg-red-50",border:"border-red-300",text:"text-red-800",icon:"🔥"}},l=r[n.energy]||r.low;return e.jsx("div",{className:`
                    ${l.bg} ${l.border} border-2 rounded-xl p-lg cursor-pointer
                    transform transition-all duration-200 hover:scale-102 hover:shadow-lg
                  `,onClick:()=>i(n),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-md",children:[e.jsx("div",{className:"text-2xl",children:l.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:n.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Estimated: ",n.est_minutes," minutes"]})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${l.text} bg-white`,children:(o=n.energy)==null?void 0:o.toUpperCase()})]})},n.id)})}),e.jsxs("div",{className:"text-center space-y-md",children:[e.jsx("button",{onClick:()=>{const n=t[Math.floor(Math.random()*t.length)];i(n)},className:"btn btn-xl btn-primary w-full",children:"🎲 PICK RANDOM TASK"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click any task above or let fate decide with the random picker!"})]})]})}),e.jsx("div",{className:"text-center mt-xl",children:e.jsx("button",{onClick:()=>a("/add-tasks"),className:"btn btn-outline",children:"← Back to Tasks"})}),e.jsxs("div",{className:"flex justify-center gap-lg text-sm mt-lg",children:[e.jsxs("div",{className:"flex items-center gap-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsx("span",{children:"Low Energy"})]}),e.jsxs("div",{className:"flex items-center gap-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),e.jsx("span",{children:"Medium Energy"})]}),e.jsxs("div",{className:"flex items-center gap-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsx("span",{children:"High Energy"})]})]})]})}function Ye(){const a=_();return e.jsxs("div",{className:"container py-lg",children:[e.jsx("div",{className:"text-center mb-xl",children:e.jsx(Z,{mood:"frustrated",size:"lg",message:"Page not found! 🤔"})}),e.jsx(Y,{icon:"🔍",title:"Page Not Found",description:"Let's get back on track!",action:{label:"Go to Tasks",onClick:()=>a("/add-tasks")}})]})}function ze(){return e.jsx(le,{children:e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs(ce,{children:[e.jsx(M,{path:"/",element:e.jsx(de,{to:"/add-tasks",replace:!0})}),e.jsx(M,{path:"/add-tasks",element:e.jsx(Re,{})}),e.jsx(M,{path:"/spin",element:e.jsx(_e,{})}),e.jsx(M,{path:"/roulette",element:e.jsx(Be,{})}),e.jsx(M,{path:"/timer",element:e.jsx(De,{})}),e.jsx(M,{path:"*",element:e.jsx(Ye,{})})]})})})}B.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(ze,{})}));
